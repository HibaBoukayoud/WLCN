{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let StatisticsComponent = class StatisticsComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.chartData = null;\n    this.chartPoints = '';\n  }\n  ngOnInit() {\n    console.log('Statistics component initialized');\n    this.loadChartData();\n  }\n  loadChartData() {\n    console.log('Loading chart data from API...');\n    this.dataService.getChartData().subscribe({\n      next: data => {\n        console.log('Chart data received successfully:', data);\n        console.log('Data type:', typeof data);\n        console.log('Data keys:', Object.keys(data));\n        console.log('Targets property:', data.targets);\n        console.log('Targets type:', typeof data.targets);\n        this.chartData = data;\n        this.generateChartPoints();\n        console.log('Chart points generated:', this.chartPoints);\n      },\n      error: error => {\n        console.error('Error fetching chart data:', error);\n        console.error('Error details:', error.message, error.status);\n        // Fallback to default data if API fails\n        this.setDefaultData();\n      }\n    });\n  }\n  generateChartPoints() {\n    console.log('generateChartPoints called');\n    console.log('chartData:', this.chartData);\n    if (!this.chartData) {\n      console.error('chartData is null or undefined');\n      return;\n    }\n    if (!this.chartData.targets) {\n      console.error('chartData.targets is undefined:', this.chartData);\n      return;\n    }\n    if (!Array.isArray(this.chartData.targets)) {\n      console.error('chartData.targets is not an array:', this.chartData.targets);\n      return;\n    }\n    const points = [];\n    const maxTargets = 8;\n    const chartWidth = 240;\n    const chartHeight = 100;\n    this.chartData.targets.forEach((targets, index) => {\n      const x = index / (this.chartData.targets.length - 1) * chartWidth;\n      const y = chartHeight - targets / maxTargets * chartHeight;\n      points.push(`${x},${y}`);\n    });\n    this.chartPoints = points.join(' ');\n    console.log('Chart points generated successfully:', this.chartPoints);\n  }\n  setDefaultData() {\n    this.chartData = {\n      hours: ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23'],\n      targets: [1, 1, 2, 2, 3, 4, 5, 6, 7, 7, 6, 5, 4, 5, 6, 7, 6, 5, 4, 3, 2, 2, 1, 1],\n      total_detections: 89,\n      peak_hour: 8,\n      avg_per_hour: 3.7\n    };\n    this.generateChartPoints();\n  }\n};\nStatisticsComponent = __decorate([Component({\n  selector: 'app-statistics',\n  templateUrl: './statistics.component.html',\n  styleUrls: ['./statistics.component.css']\n})], StatisticsComponent);","map":{"version":3,"names":["Component","StatisticsComponent","constructor","dataService","chartData","chartPoints","ngOnInit","console","log","loadChartData","getChartData","subscribe","next","data","Object","keys","targets","generateChartPoints","error","message","status","setDefaultData","Array","isArray","points","maxTargets","chartWidth","chartHeight","forEach","index","x","length","y","push","join","hours","total_detections","peak_hour","avg_per_hour","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\hibab\\Desktop\\WLCN\\frontend\\src\\app\\components\\doppler-range\\doppler-range.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { DataService } from '../../services/data.service';\r\n\r\ninterface ChartData {\r\n  hours: string[];\r\n  targets: number[];\r\n  total_detections: number;\r\n  peak_hour: number;\r\n  avg_per_hour: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-statistics',\r\n  templateUrl: './statistics.component.html',\r\n  styleUrls: ['./statistics.component.css']\r\n})\r\nexport class StatisticsComponent implements OnInit {\r\n  chartData: ChartData | null = null;\r\n  chartPoints: string = '';\r\n\r\n  constructor(private dataService: DataService) { }\r\n\r\n  ngOnInit(): void {\r\n    console.log('Statistics component initialized');\r\n    this.loadChartData();\r\n  }\r\n\r\n  private loadChartData(): void {\r\n    console.log('Loading chart data from API...');\r\n    this.dataService.getChartData().subscribe({\r\n      next: (data: ChartData) => {\r\n        console.log('Chart data received successfully:', data);\r\n        console.log('Data type:', typeof data);\r\n        console.log('Data keys:', Object.keys(data));\r\n        console.log('Targets property:', data.targets);\r\n        console.log('Targets type:', typeof data.targets);\r\n        this.chartData = data;\r\n        this.generateChartPoints();\r\n        console.log('Chart points generated:', this.chartPoints);\r\n      },\r\n      error: (error) => {\r\n        console.error('Error fetching chart data:', error);\r\n        console.error('Error details:', error.message, error.status);\r\n        // Fallback to default data if API fails\r\n        this.setDefaultData();\r\n      }\r\n    });\r\n  }\r\n\r\n  private generateChartPoints(): void {\r\n    console.log('generateChartPoints called');\r\n    console.log('chartData:', this.chartData);\r\n    \r\n    if (!this.chartData) {\r\n      console.error('chartData is null or undefined');\r\n      return;\r\n    }\r\n    \r\n    if (!this.chartData.targets) {\r\n      console.error('chartData.targets is undefined:', this.chartData);\r\n      return;\r\n    }\r\n    \r\n    if (!Array.isArray(this.chartData.targets)) {\r\n      console.error('chartData.targets is not an array:', this.chartData.targets);\r\n      return;\r\n    }\r\n    \r\n    const points: string[] = [];\r\n    const maxTargets = 8;\r\n    const chartWidth = 240;\r\n    const chartHeight = 100;\r\n    \r\n    this.chartData.targets.forEach((targets, index) => {\r\n      const x = (index / (this.chartData!.targets.length - 1)) * chartWidth;\r\n      const y = chartHeight - (targets / maxTargets) * chartHeight;\r\n      points.push(`${x},${y}`);\r\n    });\r\n    \r\n    this.chartPoints = points.join(' ');\r\n    console.log('Chart points generated successfully:', this.chartPoints);\r\n  }\r\n\r\n  private setDefaultData(): void {\r\n    this.chartData = {\r\n      hours: ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23'],\r\n      targets: [1, 1, 2, 2, 3, 4, 5, 6, 7, 7, 6, 5, 4, 5, 6, 7, 6, 5, 4, 3, 2, 2, 1, 1],\r\n      total_detections: 89,\r\n      peak_hour: 8,\r\n      avg_per_hour: 3.7\r\n    };\r\n    this.generateChartPoints();\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}