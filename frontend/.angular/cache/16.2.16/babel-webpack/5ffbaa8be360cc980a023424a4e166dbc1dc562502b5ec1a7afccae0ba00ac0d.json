{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"@angular/common\";\nfunction AngleRangeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Frame: \", ctx_r0.currentAngleFrameIndex + 1, \"\");\n  }\n}\nfunction AngleRangeComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 12);\n  }\n  if (rf & 2) {\n    const cell_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"background-color\", cell_r4.color)(\"grid-row\", cell_r4.row + 1)(\"grid-column\", cell_r4.col + 1);\n    i0.ɵɵproperty(\"title\", \"Frame: \" + (ctx_r3.currentAngleFrameIndex + 1) + \", Row: \" + cell_r4.row + \", Col: \" + cell_r4.col + \", Value: \" + cell_r4.value.toFixed(4));\n  }\n}\nfunction AngleRangeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵtemplate(2, AngleRangeComponent_div_6_div_2_Template, 1, 7, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 10);\n    i0.ɵɵelement(4, \"div\", 11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"grid-template-rows\", \"repeat(\" + ctx_r1.rows + \", 1fr)\")(\"grid-template-columns\", \"repeat(\" + ctx_r1.cols + \", 1fr)\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.angleHeatmapCells);\n  }\n}\nfunction AngleRangeComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"p\");\n    i0.ɵɵtext(2, \"Loading Angle-Range data...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class AngleRangeComponent {\n  constructor(dataService, cdr) {\n    this.dataService = dataService;\n    this.cdr = cdr;\n    this.currentAngleFrame = [];\n    this.angleHeatmapCells = [];\n    this.maxValue = 0;\n    this.minValue = 0;\n    this.currentAngleFrameIndex = 0;\n    this.totalAngleFrames = 0;\n    this.animationInterval = null;\n    this.animationSpeed = 1000;\n    this.rows = 0;\n    this.cols = 0;\n  }\n  ngOnInit() {\n    this.currentAngleFrameIndex = 0;\n    this.fetchAndAnimateAngle();\n  }\n  ngOnDestroy() {\n    if (this.animationInterval) {\n      clearInterval(this.animationInterval);\n    }\n  }\n  fetchAngleFrame(frameIndex, callback) {\n    this.dataService.getAngle(frameIndex).subscribe({\n      next: data => {\n        if (data && data[\"Angle-Range Map\"]) {\n          this.currentAngleFrame = this.transposeMatrix(data[\"Angle-Range Map\"]);\n          this.rows = this.currentAngleFrame.length;\n          this.cols = this.currentAngleFrame[0]?.length || 0;\n          this.maxValue = Math.max(...this.currentAngleFrame.flat());\n          this.minValue = Math.min(...this.currentAngleFrame.flat());\n          this.generateAngleHeatmapCells();\n          this.cdr.detectChanges();\n          if (callback) callback();\n        }\n      },\n      error: error => {\n        console.error('Error fetching Angle-Range frame:', error);\n        if (callback) callback();\n      }\n    });\n  }\n  fetchAndAnimateAngle() {\n    this.fetchAngleFrame(this.currentAngleFrameIndex, () => {\n      this.animationInterval = setInterval(() => {\n        if (this.currentAngleFrameIndex < 1999) {\n          this.currentAngleFrameIndex++;\n          this.fetchAngleFrame(this.currentAngleFrameIndex);\n        } else {\n          clearInterval(this.animationInterval);\n        }\n      }, this.animationSpeed);\n    });\n  }\n  transposeMatrix(matrix) {\n    if (!matrix || matrix.length === 0) return matrix;\n    const rows = matrix.length;\n    const cols = matrix[0].length;\n    const transposed = [];\n    for (let j = 0; j < cols; j++) {\n      transposed[j] = [];\n      for (let i = 0; i < rows; i++) {\n        transposed[j][i] = matrix[i][j];\n      }\n    }\n    return transposed;\n  }\n  generateAngleHeatmapCells() {\n    if (!this.currentAngleFrame || this.currentAngleFrame.length === 0) {\n      console.error('Invalid current angle frame data');\n      return;\n    }\n    this.angleHeatmapCells = [];\n    this.currentAngleFrame.forEach((row, rowIndex) => {\n      row.forEach((value, colIndex) => {\n        const normalizedValue = this.maxValue !== this.minValue ? (value - this.minValue) / (this.maxValue - this.minValue) : 0;\n        const color = this.getViridisColor(normalizedValue);\n        this.angleHeatmapCells.push({\n          row: rowIndex,\n          col: colIndex,\n          value: value,\n          color: color\n        });\n      });\n    });\n  }\n  getViridisColor(normalizedValue) {\n    if (normalizedValue <= 0.25) {\n      const t = normalizedValue / 0.25;\n      const r = Math.round(68 + (59 - 68) * t);\n      const g = Math.round(1 + (82 - 1) * t);\n      const b = Math.round(84 + (139 - 84) * t);\n      return `rgb(${r}, ${g}, ${b})`;\n    } else if (normalizedValue <= 0.5) {\n      const t = (normalizedValue - 0.25) / 0.25;\n      const r = Math.round(59 + (33 - 59) * t);\n      const g = Math.round(82 + (144 - 82) * t);\n      const b = Math.round(139 + (140 - 139) * t);\n      return `rgb(${r}, ${g}, ${b})`;\n    } else if (normalizedValue <= 0.75) {\n      const t = (normalizedValue - 0.5) / 0.25;\n      const r = Math.round(33 + (94 - 33) * t);\n      const g = Math.round(144 + (201 - 144) * t);\n      const b = Math.round(140 + (98 - 140) * t);\n      return `rgb(${r}, ${g}, ${b})`;\n    } else {\n      const t = (normalizedValue - 0.75) / 0.25;\n      const r = Math.round(94 + (253 - 94) * t);\n      const g = Math.round(201 + (231 - 201) * t);\n      const b = Math.round(98 + (37 - 98) * t);\n      return `rgb(${r}, ${g}, ${b})`;\n    }\n  }\n  static {\n    this.ɵfac = function AngleRangeComponent_Factory(t) {\n      return new (t || AngleRangeComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AngleRangeComponent,\n      selectors: [[\"app-angle-range\"]],\n      decls: 8,\n      vars: 3,\n      consts: [[1, \"doppler-range-container\"], [1, \"doppler-header\"], [\"class\", \"frame-info\", 4, \"ngIf\"], [1, \"doppler-visualization\"], [\"class\", \"heatmap-container\", 4, \"ngIf\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [1, \"frame-info\"], [1, \"heatmap-container\"], [1, \"heatmap-grid\"], [\"class\", \"heatmap-cell\", 3, \"background-color\", \"grid-row\", \"grid-column\", \"title\", 4, \"ngFor\", \"ngForOf\"], [1, \"color-bar\"], [1, \"color-gradient\"], [1, \"heatmap-cell\", 3, \"title\"], [1, \"loading-state\"]],\n      template: function AngleRangeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\");\n          i0.ɵɵtext(3, \"Angle-Range Map (Live Plot)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, AngleRangeComponent_div_4_Template, 3, 1, \"div\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 3);\n          i0.ɵɵtemplate(6, AngleRangeComponent_div_6_Template, 5, 5, \"div\", 4);\n          i0.ɵɵtemplate(7, AngleRangeComponent_div_7_Template, 3, 0, \"div\", 5);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.angleHeatmapCells.length > 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.angleHeatmapCells.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.angleHeatmapCells.length === 0);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\".btn-prev[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%] {\\n  color: #111 !important;\\n}\\n.doppler-range-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  height: -moz-fit-content;\\n  height: fit-content; \\n\\n  padding: 20px;\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\\n}\\n\\n.doppler-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n  margin-bottom: 16px;\\n  border-bottom: 2px solid #f0f0f0;\\n  padding-bottom: 16px;\\n}\\n\\n.doppler-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin: 0;\\n  color: #0a2540;\\n  font-size: 18px;\\n  font-weight: 600;\\n}\\n\\n.animation-controls[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.frame-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 16px;\\n  font-size: 12px;\\n  color: #666;\\n}\\n\\n.frame-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  background-color: #f0f8ff;\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  border: 1px solid #00d4ff;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  padding: 6px 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  background-color: white;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #4ab6cea4;\\n  border-color: #00d4ff;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.btn-play[_ngcontent-%COMP%] {\\n  background-color: #28a745 !important;\\n  color: white;\\n  border-color: #28a745 !important;\\n}\\n\\n.btn-stop[_ngcontent-%COMP%] {\\n  background-color: #dc3545 !important;\\n  color: white;\\n  border-color: #dc3545 !important;\\n}\\n\\n.frame-slider[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.frame-range[_ngcontent-%COMP%] {\\n  flex: 1;\\n  height: 8px;\\n  border-radius: 4px;\\n  background: #ddd;\\n  outline: none;\\n  -webkit-appearance: none;\\n}\\n\\n.frame-range[_ngcontent-%COMP%]::-webkit-slider-thumb {\\n  appearance: none;\\n  width: 20px;\\n  height: 20px;\\n  border-radius: 50%;\\n  background: #00d4ff;\\n  cursor: pointer;\\n}\\n\\n.speed-control[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 12px;\\n}\\n\\n.speed-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 80px;\\n  padding: 4px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n}\\n\\n.doppler-visualization[_ngcontent-%COMP%] {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.heatmap-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 20px;\\n  flex: 1;\\n  align-items: flex-start;\\n}\\n\\n.heatmap-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  gap: 0px; \\n\\n  flex: 1;\\n  border: none;\\n  border-radius: 4px;\\n  padding: 0px; \\n\\n  background-color: #f9f9f9;\\n  max-height: 500px;\\n  max-width: 500px;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n}\\n\\n.heatmap-cell[_ngcontent-%COMP%] {\\n  display: block;\\n  border-radius: 0px; \\n\\n  cursor: pointer;\\n  transition: transform 0.1s;\\n  min-height: 10px;\\n  min-width: 10px;\\n  width: 10px;\\n  height: 10px;\\n}\\n\\n\\n\\n.color-bar[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  min-width: 40px;\\n  margin-left: 10px;\\n}\\n\\n.color-gradient[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 340px; \\n\\n  background: linear-gradient(to top, \\n    rgb(68, 1, 84),     \\n\\n    rgb(59, 82, 139),   \\n\\n    rgb(33, 144, 140),  \\n\\n    rgb(94, 201, 98),   \\n\\n    rgb(253, 231, 37)   \\n\\n  );\\n  border: 1px solid #333;\\n  border-radius: 4px;\\n  margin-bottom: 8px;\\n}\\n\\n.color-labels[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 500px; \\n\\n  font-size: 10px;\\n  color: #666;\\n  text-align: center;\\n}\\n\\n.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex: 1;\\n  color: #666;\\n  font-style: italic;\\n}\\n\\n.color-legend[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  width: 80px;\\n  height: 100%;\\n}\\n\\n.legend-title[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: #333;\\n  text-align: center;\\n}\\n\\n.legend-bar[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: stretch;\\n  flex: 1;\\n}\\n\\n.legend-gradient[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 100%;\\n  background: linear-gradient(to top, \\n    rgb(0, 0, 255) 0%, \\n    rgb(0, 255, 255) 33%, \\n    rgb(255, 255, 0) 66%, \\n    rgb(255, 0, 0) 100%);\\n  border: 1px solid #ccc;\\n  border-radius: 3px;\\n}\\n\\n.legend-labels[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n  margin-left: 8px;\\n  font-size: 10px;\\n  color: #666;\\n}\\n\\n.loading[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100%;\\n  color: #666;\\n  font-style: italic;\\n}\\n\\n.doppler-bar[_ngcontent-%COMP%] {\\n  width: 15%;\\n  background: linear-gradient(to top, var(--primary-color), var(--accent-color));\\n  border-radius: var(--border-radius-sm);\\n  animation: _ngcontent-%COMP%_rise 0.5s ease-out forwards;\\n  transform: scaleY(0);\\n  transform-origin: bottom;\\n}\\n\\n@keyframes _ngcontent-%COMP%_rise {\\n  from {\\n    transform: scaleY(0);\\n  }\\n  to {\\n    transform: scaleY(1);\\n  }\\n}\\n\\n.doppler-info[_ngcontent-%COMP%] {\\n  margin-top: var(--spacing-md);\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.range-info[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  color: var(--dark-gray);\\n}\\n\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9hbmdsZS1yYW5nZS9hbmdsZS1yYW5nZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTs7RUFFRSxzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsd0JBQW1CO0VBQW5CLG1CQUFtQixFQUFFLDRCQUE0QjtFQUNqRCxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFNBQVM7RUFDVCxtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsU0FBUztBQUNYOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFNBQVM7RUFDVCxlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZUFBZTtFQUNmLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLFlBQVk7RUFDWixnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsWUFBWTtFQUNaLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsUUFBUTtBQUNWOztBQUVBO0VBQ0UsT0FBTztFQUNQLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYix3QkFBd0I7QUFDMUI7O0FBRUE7RUFFRSxnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFFBQVE7RUFDUixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsT0FBTztFQUNQLGFBQWE7RUFDYixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsU0FBUztFQUNULE9BQU87RUFDUCx1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsUUFBUSxFQUFFLDRDQUE0QztFQUN0RCxPQUFPO0VBQ1AsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixZQUFZLEVBQUUsb0JBQW9CO0VBQ2xDLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCLEVBQUUsOENBQThDO0VBQ2xFLGVBQWU7RUFDZiwwQkFBMEI7RUFDMUIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBLGNBQWM7QUFDZDtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYSxFQUFFLDBEQUEwRDtFQUN6RTs7Ozs7O0dBTUM7RUFDRCxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsOEJBQThCO0VBQzlCLGFBQWEsRUFBRSwwREFBMEQ7RUFDekUsZUFBZTtFQUNmLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixPQUFPO0VBQ1AsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLE9BQU87QUFDVDs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1o7Ozs7d0JBSXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDhCQUE4QjtFQUM5QixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixZQUFZO0VBQ1osV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFVBQVU7RUFDViw4RUFBOEU7RUFDOUUsc0NBQXNDO0VBQ3RDLHNDQUFzQztFQUN0QyxvQkFBb0I7RUFDcEIsd0JBQXdCO0FBQzFCOztBQUVBO0VBQ0U7SUFDRSxvQkFBb0I7RUFDdEI7RUFDQTtJQUNFLG9CQUFvQjtFQUN0QjtBQUNGOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLGFBQWE7RUFDYiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUVBLDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uYnRuLXByZXYsXHJcbi5idG4tbmV4dCB7XHJcbiAgY29sb3I6ICMxMTEgIWltcG9ydGFudDtcclxufVxyXG4uZG9wcGxlci1yYW5nZS1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBoZWlnaHQ6IGZpdC1jb250ZW50OyAvKiBBZGp1c3RlZCB0byBmaXQgY29udGVudCAqL1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XHJcbn1cclxuXHJcbi5kb3BwbGVyLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGdhcDogMTJweDtcclxuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xyXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZjBmMGYwO1xyXG4gIHBhZGRpbmctYm90dG9tOiAxNnB4O1xyXG59XHJcblxyXG4uZG9wcGxlci1oZWFkZXIgaDMge1xyXG4gIG1hcmdpbjogMDtcclxuICBjb2xvcjogIzBhMjU0MDtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmFuaW1hdGlvbi1jb250cm9scyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGdhcDogMTBweDtcclxufVxyXG5cclxuLmZyYW1lLWluZm8ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiAxNnB4O1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBjb2xvcjogIzY2NjtcclxufVxyXG5cclxuLmZyYW1lLWluZm8gc3BhbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjhmZjtcclxuICBwYWRkaW5nOiA0cHggOHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjMDBkNGZmO1xyXG59XHJcblxyXG4uY29udHJvbC1idXR0b25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogOHB4O1xyXG59XHJcblxyXG4uY29udHJvbC1idXR0b25zIGJ1dHRvbiB7XHJcbiAgcGFkZGluZzogNnB4IDEycHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcclxufVxyXG5cclxuLmNvbnRyb2wtYnV0dG9ucyBidXR0b246aG92ZXI6bm90KDpkaXNhYmxlZCkge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM0YWI2Y2VhNDtcclxuICBib3JkZXItY29sb3I6ICMwMGQ0ZmY7XHJcbn1cclxuXHJcbi5jb250cm9sLWJ1dHRvbnMgYnV0dG9uOmRpc2FibGVkIHtcclxuICBvcGFjaXR5OiAwLjU7XHJcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxufVxyXG5cclxuLmJ0bi1wbGF5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjhhNzQ1ICFpbXBvcnRhbnQ7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlci1jb2xvcjogIzI4YTc0NSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4uYnRuLXN0b3Age1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNkYzM1NDUgIWltcG9ydGFudDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLWNvbG9yOiAjZGMzNTQ1ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5mcmFtZS1zbGlkZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDhweDtcclxufVxyXG5cclxuLmZyYW1lLXJhbmdlIHtcclxuICBmbGV4OiAxO1xyXG4gIGhlaWdodDogOHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG4uZnJhbWUtcmFuZ2U6Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcclxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XHJcbiAgYXBwZWFyYW5jZTogbm9uZTtcclxuICB3aWR0aDogMjBweDtcclxuICBoZWlnaHQ6IDIwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGJhY2tncm91bmQ6ICMwMGQ0ZmY7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uc3BlZWQtY29udHJvbCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogOHB4O1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxufVxyXG5cclxuLnNwZWVkLWNvbnRyb2wgaW5wdXQge1xyXG4gIHdpZHRoOiA4MHB4O1xyXG4gIHBhZGRpbmc6IDRweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuLmRvcHBsZXItdmlzdWFsaXphdGlvbiB7XHJcbiAgZmxleDogMTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbn1cclxuXHJcbi5oZWF0bWFwLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBnYXA6IDIwcHg7XHJcbiAgZmxleDogMTtcclxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcclxufVxyXG5cclxuLmhlYXRtYXAtZ3JpZCB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBnYXA6IDBweDsgLyogUmltb3NzbyBnYXAgcGVyIGVsaW1pbmFyZSBsaW5lZSBiaWFuY2hlICovXHJcbiAgZmxleDogMTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIHBhZGRpbmc6IDBweDsgLyogUmlkb3R0byBwYWRkaW5nICovXHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTtcclxuICBtYXgtaGVpZ2h0OiA1MDBweDtcclxuICBtYXgtd2lkdGg6IDUwMHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuLmhlYXRtYXAtY2VsbCB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgYm9yZGVyLXJhZGl1czogMHB4OyAvKiBSaW1vc3NvIGJvcmRlci1yYWRpdXMgcGVyIGVsaW1pbmFyZSBzcGF6aSAqL1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4xcztcclxuICBtaW4taGVpZ2h0OiAxMHB4O1xyXG4gIG1pbi13aWR0aDogMTBweDtcclxuICB3aWR0aDogMTBweDtcclxuICBoZWlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi8qIENvbG9yIEJhciAqL1xyXG4uY29sb3ItYmFyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtaW4td2lkdGg6IDQwcHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuXHJcbi5jb2xvci1ncmFkaWVudCB7XHJcbiAgd2lkdGg6IDIwcHg7XHJcbiAgaGVpZ2h0OiAzNDBweDsgLyogQXVtZW50YXRhIHBlciBjb3JyaXNwb25kZXJlIGFsbCdhbHRlenphIGRlbGxhIGdyaWdsaWEgKi9cclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gdG9wLCBcclxuICAgIHJnYig2OCwgMSwgODQpLCAgICAgLyogVmlvbGEgc2N1cm8gKi9cclxuICAgIHJnYig1OSwgODIsIDEzOSksICAgLyogQmx1ICovXHJcbiAgICByZ2IoMzMsIDE0NCwgMTQwKSwgIC8qIFZlcmRlIHNjdXJvICovXHJcbiAgICByZ2IoOTQsIDIwMSwgOTgpLCAgIC8qIFZlcmRlIGNoaWFybyAqL1xyXG4gICAgcmdiKDI1MywgMjMxLCAzNykgICAvKiBHaWFsbG8gKi9cclxuICApO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDhweDtcclxufVxyXG5cclxuLmNvbG9yLWxhYmVscyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBoZWlnaHQ6IDUwMHB4OyAvKiBBdW1lbnRhdGEgcGVyIGNvcnJpc3BvbmRlcmUgYWxsJ2FsdGV6emEgZGVsbGEgZ3JpZ2xpYSAqL1xyXG4gIGZvbnQtc2l6ZTogMTBweDtcclxuICBjb2xvcjogIzY2NjtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5sb2FkaW5nLXN0YXRlLCAuZXJyb3Itc3RhdGUge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBmbGV4OiAxO1xyXG4gIGNvbG9yOiAjNjY2O1xyXG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcclxufVxyXG5cclxuLmNvbG9yLWxlZ2VuZCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIHdpZHRoOiA4MHB4O1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmxlZ2VuZC10aXRsZSB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICBjb2xvcjogIzMzMztcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5sZWdlbmQtYmFyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xyXG4gIGZsZXg6IDE7XHJcbn1cclxuXHJcbi5sZWdlbmQtZ3JhZGllbnQge1xyXG4gIHdpZHRoOiAyMHB4O1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gdG9wLCBcclxuICAgIHJnYigwLCAwLCAyNTUpIDAlLCBcclxuICAgIHJnYigwLCAyNTUsIDI1NSkgMzMlLCBcclxuICAgIHJnYigyNTUsIDI1NSwgMCkgNjYlLCBcclxuICAgIHJnYigyNTUsIDAsIDApIDEwMCUpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG59XHJcblxyXG4ubGVnZW5kLWxhYmVscyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICBmb250LXNpemU6IDEwcHg7XHJcbiAgY29sb3I6ICM2NjY7XHJcbn1cclxuXHJcbi5sb2FkaW5nIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGNvbG9yOiAjNjY2O1xyXG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcclxufVxyXG5cclxuLmRvcHBsZXItYmFyIHtcclxuICB3aWR0aDogMTUlO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byB0b3AsIHZhcigtLXByaW1hcnktY29sb3IpLCB2YXIoLS1hY2NlbnQtY29sb3IpKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLXNtKTtcclxuICBhbmltYXRpb246IHJpc2UgMC41cyBlYXNlLW91dCBmb3J3YXJkcztcclxuICB0cmFuc2Zvcm06IHNjYWxlWSgwKTtcclxuICB0cmFuc2Zvcm0tb3JpZ2luOiBib3R0b207XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgcmlzZSB7XHJcbiAgZnJvbSB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlWSgwKTtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgdHJhbnNmb3JtOiBzY2FsZVkoMSk7XHJcbiAgfVxyXG59XHJcblxyXG4uZG9wcGxlci1pbmZvIHtcclxuICBtYXJnaW4tdG9wOiB2YXIoLS1zcGFjaW5nLW1kKTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufVxyXG5cclxuLnJhbmdlLWluZm8ge1xyXG4gIGZvbnQtc2l6ZTogMC45cmVtO1xyXG4gIGNvbG9yOiB2YXIoLS1kYXJrLWdyYXkpO1xyXG59XHJcblxyXG4vKiBUT0RPOiBpbXBsZW1lbnQgYW5pbWF0aW9uICovIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","currentAngleFrameIndex","ɵɵelement","ɵɵstyleProp","cell_r4","color","row","col","ɵɵproperty","ctx_r3","value","toFixed","ɵɵtemplate","AngleRangeComponent_div_6_div_2_Template","ctx_r1","rows","cols","angleHeatmapCells","AngleRangeComponent","constructor","dataService","cdr","currentAngleFrame","maxValue","minValue","totalAngleFrames","animationInterval","animationSpeed","ngOnInit","fetchAndAnimateAngle","ngOnDestroy","clearInterval","fetchAngleFrame","frameIndex","callback","getAngle","subscribe","next","data","transposeMatrix","length","Math","max","flat","min","generateAngleHeatmapCells","detectChanges","error","console","setInterval","matrix","transposed","j","i","forEach","rowIndex","colIndex","normalizedValue","getViridisColor","push","t","r","round","g","b","ɵɵdirectiveInject","i1","DataService","ChangeDetectorRef","selectors","decls","vars","consts","template","AngleRangeComponent_Template","rf","ctx","AngleRangeComponent_div_4_Template","AngleRangeComponent_div_6_Template","AngleRangeComponent_div_7_Template"],"sources":["C:\\Users\\hibab\\Desktop\\WLCN\\frontend\\src\\app\\components\\angle-range\\angle-range.component.ts","C:\\Users\\hibab\\Desktop\\WLCN\\frontend\\src\\app\\components\\angle-range\\angle-range.component.html"],"sourcesContent":["\r\nimport { Component, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { DataService } from '../../services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-angle-range',\r\n  templateUrl: './angle-range.component.html',\r\n  styleUrls: ['./angle-range.component.css']\r\n})\r\nexport class AngleRangeComponent implements OnInit, OnDestroy {\r\n  currentAngleFrame: number[][] = [];\r\n  angleHeatmapCells: Array<{row: number, col: number, value: number, color: string}> = [];\r\n  maxValue: number = 0;\r\n  minValue: number = 0;\r\n  currentAngleFrameIndex: number = 0;\r\n  totalAngleFrames: number = 0;\r\n  animationInterval: any = null;\r\n  animationSpeed: number = 1000;\r\n  rows: number = 0;\r\n  cols: number = 0;\r\n\r\n  constructor(private dataService: DataService, private cdr: ChangeDetectorRef) { }\r\n\r\n  ngOnInit(): void {\r\n    this.currentAngleFrameIndex = 0;\r\n    this.fetchAndAnimateAngle();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.animationInterval) {\r\n      clearInterval(this.animationInterval);\r\n    }\r\n  }\r\n\r\n  fetchAngleFrame(frameIndex: number, callback?: () => void): void {\r\n    this.dataService.getAngle(frameIndex).subscribe({\r\n      next: (data: any) => {\r\n        if (data && data[\"Angle-Range Map\"]) {\r\n          this.currentAngleFrame = this.transposeMatrix(data[\"Angle-Range Map\"]);\r\n          this.rows = this.currentAngleFrame.length;\r\n          this.cols = this.currentAngleFrame[0]?.length || 0;\r\n          this.maxValue = Math.max(...this.currentAngleFrame.flat());\r\n          this.minValue = Math.min(...this.currentAngleFrame.flat());\r\n          this.generateAngleHeatmapCells();\r\n          this.cdr.detectChanges();\r\n          if (callback) callback();\r\n        }\r\n      },\r\n      error: (error) => {\r\n        console.error('Error fetching Angle-Range frame:', error);\r\n        if (callback) callback();\r\n      }\r\n    });\r\n  }\r\n\r\n  fetchAndAnimateAngle(): void {\r\n    this.fetchAngleFrame(this.currentAngleFrameIndex, () => {\r\n      this.animationInterval = setInterval(() => {\r\n        if (this.currentAngleFrameIndex < 1999) {\r\n          this.currentAngleFrameIndex++;\r\n          this.fetchAngleFrame(this.currentAngleFrameIndex);\r\n        } else {\r\n          clearInterval(this.animationInterval);\r\n        }\r\n      }, this.animationSpeed);\r\n    });\r\n  }\r\n\r\n  private transposeMatrix(matrix: number[][]): number[][] {\r\n    if (!matrix || matrix.length === 0) return matrix;\r\n    const rows = matrix.length;\r\n    const cols = matrix[0].length;\r\n    const transposed: number[][] = [];\r\n    for (let j = 0; j < cols; j++) {\r\n      transposed[j] = [];\r\n      for (let i = 0; i < rows; i++) {\r\n        transposed[j][i] = matrix[i][j];\r\n      }\r\n    }\r\n    return transposed;\r\n  }\r\n\r\n  private generateAngleHeatmapCells(): void {\r\n    if (!this.currentAngleFrame || this.currentAngleFrame.length === 0) {\r\n      console.error('Invalid current angle frame data');\r\n      return;\r\n    }\r\n    this.angleHeatmapCells = [];\r\n    this.currentAngleFrame.forEach((row: number[], rowIndex: number) => {\r\n      row.forEach((value: number, colIndex: number) => {\r\n        const normalizedValue = this.maxValue !== this.minValue \r\n          ? (value - this.minValue) / (this.maxValue - this.minValue)\r\n          : 0;\r\n        const color = this.getViridisColor(normalizedValue);\r\n        this.angleHeatmapCells.push({\r\n          row: rowIndex,\r\n          col: colIndex,\r\n          value: value,\r\n          color: color\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  private getViridisColor(normalizedValue: number): string {\r\n    if (normalizedValue <= 0.25) {\r\n      const t = normalizedValue / 0.25;\r\n      const r = Math.round(68 + (59 - 68) * t);\r\n      const g = Math.round(1 + (82 - 1) * t);\r\n      const b = Math.round(84 + (139 - 84) * t);\r\n      return `rgb(${r}, ${g}, ${b})`;\r\n    } else if (normalizedValue <= 0.5) {\r\n      const t = (normalizedValue - 0.25) / 0.25;\r\n      const r = Math.round(59 + (33 - 59) * t);\r\n      const g = Math.round(82 + (144 - 82) * t);\r\n      const b = Math.round(139 + (140 - 139) * t);\r\n      return `rgb(${r}, ${g}, ${b})`;\r\n    } else if (normalizedValue <= 0.75) {\r\n      const t = (normalizedValue - 0.5) / 0.25;\r\n      const r = Math.round(33 + (94 - 33) * t);\r\n      const g = Math.round(144 + (201 - 144) * t);\r\n      const b = Math.round(140 + (98 - 140) * t);\r\n      return `rgb(${r}, ${g}, ${b})`;\r\n    } else {\r\n      const t = (normalizedValue - 0.75) / 0.25;\r\n      const r = Math.round(94 + (253 - 94) * t);\r\n      const g = Math.round(201 + (231 - 201) * t);\r\n      const b = Math.round(98 + (37 - 98) * t);\r\n      return `rgb(${r}, ${g}, ${b})`;\r\n    }\r\n  }\r\n}\r\n","\r\n\r\n<div class=\"doppler-range-container\">\r\n  <div class=\"doppler-header\">\r\n    <h3>Angle-Range Map (Live Plot)</h3>\r\n    <div class=\"frame-info\" *ngIf=\"angleHeatmapCells.length > 0\">\r\n      <span>Frame: {{ currentAngleFrameIndex + 1 }}</span>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class=\"doppler-visualization\">\r\n    <div class=\"heatmap-container\" *ngIf=\"angleHeatmapCells.length > 0\">\r\n      <div class=\"heatmap-grid\" \r\n           [style.grid-template-rows]=\"'repeat(' + rows + ', 1fr)'\"\r\n           [style.grid-template-columns]=\"'repeat(' + cols + ', 1fr)'\">\r\n        <div *ngFor=\"let cell of angleHeatmapCells\" \r\n             class=\"heatmap-cell\"\r\n             [style.background-color]=\"cell.color\"\r\n             [style.grid-row]=\"cell.row + 1\"\r\n             [style.grid-column]=\"cell.col + 1\"\r\n             [title]=\"'Frame: ' + (currentAngleFrameIndex + 1) + ', Row: ' + cell.row + ', Col: ' + cell.col + ', Value: ' + cell.value.toFixed(4)\">\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Color Bar Legend -->\r\n      <div class=\"color-bar\">\r\n        <div class=\"color-gradient\"></div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Loading state -->\r\n    <div *ngIf=\"angleHeatmapCells.length === 0\" class=\"loading-state\">\r\n      <p>Loading Angle-Range data...</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}