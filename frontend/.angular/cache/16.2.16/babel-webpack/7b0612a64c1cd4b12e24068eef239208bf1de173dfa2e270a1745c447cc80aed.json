{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"@angular/common\";\nfunction DopplerRangeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Frame: \", ctx_r0.currentFrameIndex + 1, \"\");\n  }\n}\nfunction DopplerRangeComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 12);\n  }\n  if (rf & 2) {\n    const cell_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"background-color\", cell_r4.color)(\"grid-row\", cell_r4.row + 1)(\"grid-column\", cell_r4.col + 1);\n    i0.ɵɵproperty(\"title\", \"Frame: \" + (ctx_r3.currentFrameIndex + 1) + \", Row: \" + cell_r4.row + \", Col: \" + cell_r4.col + \", Value: \" + cell_r4.value.toFixed(4));\n  }\n}\nfunction DopplerRangeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵtemplate(2, DopplerRangeComponent_div_6_div_2_Template, 1, 7, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 10);\n    i0.ɵɵelement(4, \"div\", 11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"grid-template-rows\", \"repeat(\" + ctx_r1.rows + \", 1fr)\")(\"grid-template-columns\", \"repeat(\" + ctx_r1.cols + \", 1fr)\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.heatmapCells);\n  }\n}\nfunction DopplerRangeComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"p\");\n    i0.ɵɵtext(2, \"Loading Range-Doppler data...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class DopplerRangeComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.plotData = [];\n    this.plotLayout = {};\n    this.currentFrameIndex = 0;\n    this.totalFrames = 0;\n    this.animationInterval = null;\n    this.animationSpeed = 1000;\n    this.heatmapCells = [];\n    this.rows = 0;\n    this.cols = 0;\n  }\n  ngOnInit() {\n    this.currentFrameIndex = 0;\n    this.fetchAndAnimate();\n  }\n  ngOnDestroy() {\n    if (this.animationInterval) {\n      clearInterval(this.animationInterval);\n    }\n  }\n  fetchDopplerFrame(frameIndex, callback) {\n    console.log('[FRONTEND] Richiesta frame Doppler:', frameIndex);\n    this.dataService.getDoppler(frameIndex).subscribe({\n      next: data => {\n        console.log('[FRONTEND] Ricevuto frame Doppler:', frameIndex, 'Data:', data);\n        if (data && data[\"Range-Doppler Map\"]) {\n          this.totalFrames = data[\"available_frames\"] || 1;\n          const map = data[\"Range-Doppler Map\"];\n          this.rows = map.length;\n          this.cols = map[0]?.length || 0;\n          // Flatten and colorize\n          const flat = [];\n          let min = Infinity,\n            max = -Infinity;\n          for (let r = 0; r < this.rows; r++) {\n            for (let c = 0; c < this.cols; c++) {\n              const v = map[r][c];\n              if (v < min) min = v;\n              if (v > max) max = v;\n            }\n          }\n          // Simple Viridis color scale (linear interpolation)\n          function viridisColor(val, min, max) {\n            const t = (val - min) / (max - min || 1);\n            // Approximate viridis gradient\n            const stops = [[68, 1, 84], [71, 44, 122], [59, 81, 139], [44, 113, 142], [33, 144, 141], [39, 173, 129], [92, 200, 99], [170, 220, 50], [253, 231, 37]];\n            const idx = Math.floor(t * (stops.length - 1));\n            const [r, g, b] = stops[idx];\n            return `rgb(${r},${g},${b})`;\n          }\n          for (let r = 0; r < this.rows; r++) {\n            for (let c = 0; c < this.cols; c++) {\n              flat.push({\n                row: r,\n                col: c,\n                value: map[r][c],\n                color: viridisColor(map[r][c], min, max)\n              });\n            }\n          }\n          this.heatmapCells = flat;\n          console.log('[FRONTEND] Aggiornata heatmapCells, frame:', frameIndex, 'cells:', flat.length);\n          if (callback) callback();\n        } else {\n          this.heatmapCells = [];\n          console.warn('[FRONTEND] Nessun dato Range-Doppler Map per frame:', frameIndex);\n        }\n      },\n      error: error => {\n        console.error('[FRONTEND] Errore fetch Range-Doppler frame:', frameIndex, error);\n        this.heatmapCells = [];\n        if (callback) callback();\n      }\n    });\n  }\n  fetchAndAnimate() {\n    if (this.animationInterval) {\n      clearInterval(this.animationInterval);\n    }\n    // Carica subito il primo frame, poi avvia animazione solo dopo aver ricevuto totalFrames\n    this.fetchDopplerFrame(this.currentFrameIndex, () => {\n      if (this.totalFrames > 1) {\n        this.animationInterval = setInterval(() => {\n          if (this.currentFrameIndex < this.totalFrames - 1) {\n            this.currentFrameIndex++;\n          } else {\n            this.currentFrameIndex = 0;\n          }\n          this.fetchDopplerFrame(this.currentFrameIndex);\n        }, 100); // 100ms tra i frame\n      }\n    });\n  }\n\n  static {\n    this.ɵfac = function DopplerRangeComponent_Factory(t) {\n      return new (t || DopplerRangeComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DopplerRangeComponent,\n      selectors: [[\"app-doppler-range\"]],\n      decls: 8,\n      vars: 3,\n      consts: [[1, \"doppler-range-container\"], [1, \"doppler-header\"], [\"class\", \"frame-info\", 4, \"ngIf\"], [1, \"doppler-visualization\"], [\"class\", \"heatmap-container\", 4, \"ngIf\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [1, \"frame-info\"], [1, \"heatmap-container\"], [1, \"heatmap-grid\"], [\"class\", \"heatmap-cell\", 3, \"background-color\", \"grid-row\", \"grid-column\", \"title\", 4, \"ngFor\", \"ngForOf\"], [1, \"color-bar\"], [1, \"color-gradient\"], [1, \"heatmap-cell\", 3, \"title\"], [1, \"loading-state\"]],\n      template: function DopplerRangeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\");\n          i0.ɵɵtext(3, \"Range-Doppler Map (Live Plot)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, DopplerRangeComponent_div_4_Template, 3, 1, \"div\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 3);\n          i0.ɵɵtemplate(6, DopplerRangeComponent_div_6_Template, 5, 5, \"div\", 4);\n          i0.ɵɵtemplate(7, DopplerRangeComponent_div_7_Template, 3, 0, \"div\", 5);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.heatmapCells.length > 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.heatmapCells.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.heatmapCells.length === 0);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\".btn-prev[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%] {\\n  color: #111 !important;\\n}\\n.doppler-range-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  height: -moz-fit-content;\\n  height: fit-content; \\n\\n  padding: 20px;\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\\n}\\n\\n.doppler-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n  margin-bottom: 16px;\\n  border-bottom: 2px solid #f0f0f0;\\n  padding-bottom: 16px;\\n}\\n\\n.doppler-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin: 0;\\n  color: #0a2540;\\n  font-size: 18px;\\n  font-weight: 600;\\n}\\n\\n.animation-controls[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.frame-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 16px;\\n  font-size: 12px;\\n  color: #666;\\n}\\n\\n.frame-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  background-color: #f0f8ff;\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  border: 1px solid #00d4ff;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  padding: 6px 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  background-color: white;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #4ab6cea4;\\n  border-color: #00d4ff;\\n}\\n\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.btn-play[_ngcontent-%COMP%] {\\n  background-color: #28a745 !important;\\n  color: white;\\n  border-color: #28a745 !important;\\n}\\n\\n.btn-stop[_ngcontent-%COMP%] {\\n  background-color: #dc3545 !important;\\n  color: white;\\n  border-color: #dc3545 !important;\\n}\\n\\n.frame-slider[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.frame-range[_ngcontent-%COMP%] {\\n  flex: 1;\\n  height: 8px;\\n  border-radius: 4px;\\n  background: #ddd;\\n  outline: none;\\n  -webkit-appearance: none;\\n}\\n\\n.frame-range[_ngcontent-%COMP%]::-webkit-slider-thumb {\\n  appearance: none;\\n  width: 20px;\\n  height: 20px;\\n  border-radius: 50%;\\n  background: #00d4ff;\\n  cursor: pointer;\\n}\\n\\n.speed-control[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  font-size: 12px;\\n}\\n\\n.speed-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 80px;\\n  padding: 4px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n}\\n\\n.doppler-visualization[_ngcontent-%COMP%] {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.heatmap-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 20px;\\n  flex: 1;\\n  align-items: flex-start;\\n}\\n\\n.heatmap-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  gap: 0px; \\n\\n  flex: 1;\\n  border: none;\\n  border-radius: 4px;\\n  padding: 0px; \\n\\n  background-color: #f9f9f9;\\n  max-height: 500px;\\n  max-width: 500px;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n}\\n\\n.heatmap-cell[_ngcontent-%COMP%] {\\n  display: block;\\n  border-radius: 0px; \\n\\n  cursor: pointer;\\n  transition: transform 0.1s;\\n  min-height: 10px;\\n  min-width: 10px;\\n  width: 10px;\\n  height: 10px;\\n}\\n\\n\\n\\n.color-bar[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  min-width: 40px;\\n  margin-left: 10px;\\n}\\n\\n.color-gradient[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 340px; \\n\\n  background: linear-gradient(to top, \\n    rgb(68, 1, 84),     \\n\\n    rgb(59, 82, 139),   \\n\\n    rgb(33, 144, 140),  \\n\\n    rgb(94, 201, 98),   \\n\\n    rgb(253, 231, 37)   \\n\\n  );\\n  border: 1px solid #333;\\n  border-radius: 4px;\\n  margin-bottom: 8px;\\n}\\n\\n.color-labels[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 500px; \\n\\n  font-size: 10px;\\n  color: #666;\\n  text-align: center;\\n}\\n\\n.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex: 1;\\n  color: #666;\\n  font-style: italic;\\n}\\n\\n.color-legend[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  width: 80px;\\n  height: 100%;\\n}\\n\\n.legend-title[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  font-weight: 600;\\n  margin-bottom: 10px;\\n  color: #333;\\n  text-align: center;\\n}\\n\\n.legend-bar[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: stretch;\\n  flex: 1;\\n}\\n\\n.legend-gradient[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 100%;\\n  background: linear-gradient(to top, \\n    rgb(0, 0, 255) 0%, \\n    rgb(0, 255, 255) 33%, \\n    rgb(255, 255, 0) 66%, \\n    rgb(255, 0, 0) 100%);\\n  border: 1px solid #ccc;\\n  border-radius: 3px;\\n}\\n\\n.legend-labels[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n  margin-left: 8px;\\n  font-size: 10px;\\n  color: #666;\\n}\\n\\n.loading[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100%;\\n  color: #666;\\n  font-style: italic;\\n}\\n\\n.doppler-bar[_ngcontent-%COMP%] {\\n  width: 15%;\\n  background: linear-gradient(to top, var(--primary-color), var(--accent-color));\\n  border-radius: var(--border-radius-sm);\\n  animation: _ngcontent-%COMP%_rise 0.5s ease-out forwards;\\n  transform: scaleY(0);\\n  transform-origin: bottom;\\n}\\n\\n@keyframes _ngcontent-%COMP%_rise {\\n  from {\\n    transform: scaleY(0);\\n  }\\n  to {\\n    transform: scaleY(1);\\n  }\\n}\\n\\n.doppler-info[_ngcontent-%COMP%] {\\n  margin-top: var(--spacing-md);\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.range-info[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  color: var(--dark-gray);\\n}\\n\\n\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kb3BwbGVyLXJhbmdlL2RvcHBsZXItcmFuZ2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFRSxzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsd0JBQW1CO0VBQW5CLG1CQUFtQixFQUFFLDRCQUE0QjtFQUNqRCxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFNBQVM7RUFDVCxtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsU0FBUztBQUNYOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFNBQVM7RUFDVCxlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZUFBZTtFQUNmLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLDJCQUEyQjtFQUMzQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLFlBQVk7RUFDWixnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsWUFBWTtFQUNaLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsUUFBUTtBQUNWOztBQUVBO0VBQ0UsT0FBTztFQUNQLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYix3QkFBd0I7QUFDMUI7O0FBRUE7RUFFRSxnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFFBQVE7RUFDUixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsT0FBTztFQUNQLGFBQWE7RUFDYixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsU0FBUztFQUNULE9BQU87RUFDUCx1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsUUFBUSxFQUFFLDRDQUE0QztFQUN0RCxPQUFPO0VBQ1AsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixZQUFZLEVBQUUsb0JBQW9CO0VBQ2xDLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCLEVBQUUsOENBQThDO0VBQ2xFLGVBQWU7RUFDZiwwQkFBMEI7RUFDMUIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBLGNBQWM7QUFDZDtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYSxFQUFFLDBEQUEwRDtFQUN6RTs7Ozs7O0dBTUM7RUFDRCxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsOEJBQThCO0VBQzlCLGFBQWEsRUFBRSwwREFBMEQ7RUFDekUsZUFBZTtFQUNmLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixPQUFPO0VBQ1AsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLE9BQU87QUFDVDs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1o7Ozs7d0JBSXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDhCQUE4QjtFQUM5QixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixZQUFZO0VBQ1osV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFVBQVU7RUFDViw4RUFBOEU7RUFDOUUsc0NBQXNDO0VBQ3RDLHNDQUFzQztFQUN0QyxvQkFBb0I7RUFDcEIsd0JBQXdCO0FBQzFCOztBQUVBO0VBQ0U7SUFDRSxvQkFBb0I7RUFDdEI7RUFDQTtJQUNFLG9CQUFvQjtFQUN0QjtBQUNGOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLGFBQWE7RUFDYiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUVBLDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbIi5idG4tcHJldixcclxuLmJ0bi1uZXh0IHtcclxuICBjb2xvcjogIzExMSAhaW1wb3J0YW50O1xyXG59XHJcbi5kb3BwbGVyLXJhbmdlLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGhlaWdodDogZml0LWNvbnRlbnQ7IC8qIEFkanVzdGVkIHRvIGZpdCBjb250ZW50ICovXHJcbiAgcGFkZGluZzogMjBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcclxufVxyXG5cclxuLmRvcHBsZXItaGVhZGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZ2FwOiAxMnB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XHJcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmMGYwZjA7XHJcbiAgcGFkZGluZy1ib3R0b206IDE2cHg7XHJcbn1cclxuXHJcbi5kb3BwbGVyLWhlYWRlciBoMyB7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIGNvbG9yOiAjMGEyNTQwO1xyXG4gIGZvbnQtc2l6ZTogMThweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4uYW5pbWF0aW9uLWNvbnRyb2xzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZ2FwOiAxMHB4O1xyXG59XHJcblxyXG4uZnJhbWUtaW5mbyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBnYXA6IDE2cHg7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGNvbG9yOiAjNjY2O1xyXG59XHJcblxyXG4uZnJhbWUtaW5mbyBzcGFuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmOGZmO1xyXG4gIHBhZGRpbmc6IDRweCA4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICMwMGQ0ZmY7XHJcbn1cclxuXHJcbi5jb250cm9sLWJ1dHRvbnMge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiA4cHg7XHJcbn1cclxuXHJcbi5jb250cm9sLWJ1dHRvbnMgYnV0dG9uIHtcclxuICBwYWRkaW5nOiA2cHggMTJweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xyXG59XHJcblxyXG4uY29udHJvbC1idXR0b25zIGJ1dHRvbjpob3Zlcjpub3QoOmRpc2FibGVkKSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRhYjZjZWE0O1xyXG4gIGJvcmRlci1jb2xvcjogIzAwZDRmZjtcclxufVxyXG5cclxuLmNvbnRyb2wtYnV0dG9ucyBidXR0b246ZGlzYWJsZWQge1xyXG4gIG9wYWNpdHk6IDAuNTtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59XHJcblxyXG4uYnRuLXBsYXkge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLWNvbG9yOiAjMjhhNzQ1ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5idG4tc3RvcCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2RjMzU0NSAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXItY29sb3I6ICNkYzM1NDUgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmZyYW1lLXNsaWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogOHB4O1xyXG59XHJcblxyXG4uZnJhbWUtcmFuZ2Uge1xyXG4gIGZsZXg6IDE7XHJcbiAgaGVpZ2h0OiA4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XHJcbn1cclxuXHJcbi5mcmFtZS1yYW5nZTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxuICBhcHBlYXJhbmNlOiBub25lO1xyXG4gIHdpZHRoOiAyMHB4O1xyXG4gIGhlaWdodDogMjBweDtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgYmFja2dyb3VuZDogIzAwZDRmZjtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5zcGVlZC1jb250cm9sIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZ2FwOiA4cHg7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4uc3BlZWQtY29udHJvbCBpbnB1dCB7XHJcbiAgd2lkdGg6IDgwcHg7XHJcbiAgcGFkZGluZzogNHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG59XHJcblxyXG4uZG9wcGxlci12aXN1YWxpemF0aW9uIHtcclxuICBmbGV4OiAxO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmhlYXRtYXAtY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMjBweDtcclxuICBmbGV4OiAxO1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG59XHJcblxyXG4uaGVhdG1hcC1ncmlkIHtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIGdhcDogMHB4OyAvKiBSaW1vc3NvIGdhcCBwZXIgZWxpbWluYXJlIGxpbmVlIGJpYW5jaGUgKi9cclxuICBmbGV4OiAxO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgcGFkZGluZzogMHB4OyAvKiBSaWRvdHRvIHBhZGRpbmcgKi9cclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xyXG4gIG1heC1oZWlnaHQ6IDUwMHB4O1xyXG4gIG1heC13aWR0aDogNTAwcHg7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4uaGVhdG1hcC1jZWxsIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBib3JkZXItcmFkaXVzOiAwcHg7IC8qIFJpbW9zc28gYm9yZGVyLXJhZGl1cyBwZXIgZWxpbWluYXJlIHNwYXppICovXHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzO1xyXG4gIG1pbi1oZWlnaHQ6IDEwcHg7XHJcbiAgbWluLXdpZHRoOiAxMHB4O1xyXG4gIHdpZHRoOiAxMHB4O1xyXG4gIGhlaWdodDogMTBweDtcclxufVxyXG5cclxuLyogQ29sb3IgQmFyICovXHJcbi5jb2xvci1iYXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1pbi13aWR0aDogNDBweDtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG5cclxuLmNvbG9yLWdyYWRpZW50IHtcclxuICB3aWR0aDogMjBweDtcclxuICBoZWlnaHQ6IDM0MHB4OyAvKiBBdW1lbnRhdGEgcGVyIGNvcnJpc3BvbmRlcmUgYWxsJ2FsdGV6emEgZGVsbGEgZ3JpZ2xpYSAqL1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byB0b3AsIFxyXG4gICAgcmdiKDY4LCAxLCA4NCksICAgICAvKiBWaW9sYSBzY3VybyAqL1xyXG4gICAgcmdiKDU5LCA4MiwgMTM5KSwgICAvKiBCbHUgKi9cclxuICAgIHJnYigzMywgMTQ0LCAxNDApLCAgLyogVmVyZGUgc2N1cm8gKi9cclxuICAgIHJnYig5NCwgMjAxLCA5OCksICAgLyogVmVyZGUgY2hpYXJvICovXHJcbiAgICByZ2IoMjUzLCAyMzEsIDM3KSAgIC8qIEdpYWxsbyAqL1xyXG4gICk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG59XHJcblxyXG4uY29sb3ItbGFiZWxzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGhlaWdodDogNTAwcHg7IC8qIEF1bWVudGF0YSBwZXIgY29ycmlzcG9uZGVyZSBhbGwnYWx0ZXp6YSBkZWxsYSBncmlnbGlhICovXHJcbiAgZm9udC1zaXplOiAxMHB4O1xyXG4gIGNvbG9yOiAjNjY2O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmxvYWRpbmctc3RhdGUsIC5lcnJvci1zdGF0ZSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZsZXg6IDE7XHJcbiAgY29sb3I6ICM2NjY7XHJcbiAgZm9udC1zdHlsZTogaXRhbGljO1xyXG59XHJcblxyXG4uY29sb3ItbGVnZW5kIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgd2lkdGg6IDgwcHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4ubGVnZW5kLXRpdGxlIHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIGNvbG9yOiAjMzMzO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmxlZ2VuZC1iYXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XHJcbiAgZmxleDogMTtcclxufVxyXG5cclxuLmxlZ2VuZC1ncmFkaWVudCB7XHJcbiAgd2lkdGg6IDIwcHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byB0b3AsIFxyXG4gICAgcmdiKDAsIDAsIDI1NSkgMCUsIFxyXG4gICAgcmdiKDAsIDI1NSwgMjU1KSAzMyUsIFxyXG4gICAgcmdiKDI1NSwgMjU1LCAwKSA2NiUsIFxyXG4gICAgcmdiKDI1NSwgMCwgMCkgMTAwJSk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbn1cclxuXHJcbi5sZWdlbmQtbGFiZWxzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBtYXJnaW4tbGVmdDogOHB4O1xyXG4gIGZvbnQtc2l6ZTogMTBweDtcclxuICBjb2xvcjogIzY2NjtcclxufVxyXG5cclxuLmxvYWRpbmcge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgY29sb3I6ICM2NjY7XHJcbiAgZm9udC1zdHlsZTogaXRhbGljO1xyXG59XHJcblxyXG4uZG9wcGxlci1iYXIge1xyXG4gIHdpZHRoOiAxNSU7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHRvcCwgdmFyKC0tcHJpbWFyeS1jb2xvciksIHZhcigtLWFjY2VudC1jb2xvcikpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtc20pO1xyXG4gIGFuaW1hdGlvbjogcmlzZSAwLjVzIGVhc2Utb3V0IGZvcndhcmRzO1xyXG4gIHRyYW5zZm9ybTogc2NhbGVZKDApO1xyXG4gIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbTtcclxufVxyXG5cclxuQGtleWZyYW1lcyByaXNlIHtcclxuICBmcm9tIHtcclxuICAgIHRyYW5zZm9ybTogc2NhbGVZKDApO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlWSgxKTtcclxuICB9XHJcbn1cclxuXHJcbi5kb3BwbGVyLWluZm8ge1xyXG4gIG1hcmdpbi10b3A6IHZhcigtLXNwYWNpbmctbWQpO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG59XHJcblxyXG4ucmFuZ2UtaW5mbyB7XHJcbiAgZm9udC1zaXplOiAwLjlyZW07XHJcbiAgY29sb3I6IHZhcigtLWRhcmstZ3JheSk7XHJcbn1cclxuXHJcbi8qIFRPRE86IGltcGxlbWVudCBhbmltYXRpb24gKi9cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","currentFrameIndex","ɵɵelement","ɵɵstyleProp","cell_r4","color","row","col","ɵɵproperty","ctx_r3","value","toFixed","ɵɵtemplate","DopplerRangeComponent_div_6_div_2_Template","ctx_r1","rows","cols","heatmapCells","DopplerRangeComponent","constructor","dataService","plotData","plotLayout","totalFrames","animationInterval","animationSpeed","ngOnInit","fetchAndAnimate","ngOnDestroy","clearInterval","fetchDopplerFrame","frameIndex","callback","console","log","getDoppler","subscribe","next","data","map","length","flat","min","Infinity","max","r","c","v","viridisColor","val","t","stops","idx","Math","floor","g","b","push","warn","error","setInterval","ɵɵdirectiveInject","i1","DataService","selectors","decls","vars","consts","template","DopplerRangeComponent_Template","rf","ctx","DopplerRangeComponent_div_4_Template","DopplerRangeComponent_div_6_Template","DopplerRangeComponent_div_7_Template"],"sources":["C:\\Users\\hibab\\Desktop\\WLCN\\frontend\\src\\app\\components\\doppler-range\\doppler-range.component.ts","C:\\Users\\hibab\\Desktop\\WLCN\\frontend\\src\\app\\components\\doppler-range\\doppler-range.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { DataService } from '../../services/data.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-doppler-range',\r\n  templateUrl: './doppler-range.component.html',\r\n  styleUrls: ['./doppler-range.component.css']\r\n})\r\nexport class DopplerRangeComponent implements OnInit, OnDestroy {\r\n  plotData: any[] = [];\r\n  plotLayout: any = {};\r\n  currentFrameIndex: number = 0;\r\n  totalFrames: number = 0;\r\n  animationInterval: any = null;\r\n  animationSpeed: number = 1000;\r\n\r\n  heatmapCells: Array<{row: number, col: number, value: number, color: string}> = [];\r\n  rows: number = 0;\r\n  cols: number = 0;\r\n\r\n  constructor(private dataService: DataService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.currentFrameIndex = 0;\r\n    this.fetchAndAnimate();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.animationInterval) {\r\n      clearInterval(this.animationInterval);\r\n    }\r\n  }\r\n\r\n  fetchDopplerFrame(frameIndex: number, callback?: () => void): void {\r\n    console.log('[FRONTEND] Richiesta frame Doppler:', frameIndex);\r\n    this.dataService.getDoppler(frameIndex).subscribe({\r\n      next: (data: any) => {\r\n        console.log('[FRONTEND] Ricevuto frame Doppler:', frameIndex, 'Data:', data);\r\n        if (data && data[\"Range-Doppler Map\"]) {\r\n          this.totalFrames = data[\"available_frames\"] || 1;\r\n          const map = data[\"Range-Doppler Map\"];\r\n          this.rows = map.length;\r\n          this.cols = map[0]?.length || 0;\r\n          // Flatten and colorize\r\n          const flat: Array<{row: number, col: number, value: number, color: string}> = [];\r\n          let min = Infinity, max = -Infinity;\r\n          for (let r = 0; r < this.rows; r++) {\r\n            for (let c = 0; c < this.cols; c++) {\r\n              const v = map[r][c];\r\n              if (v < min) min = v;\r\n              if (v > max) max = v;\r\n            }\r\n          }\r\n          // Simple Viridis color scale (linear interpolation)\r\n          function viridisColor(val: number, min: number, max: number): string {\r\n            const t = (val - min) / (max - min || 1);\r\n            // Approximate viridis gradient\r\n            const stops = [\r\n              [68, 1, 84], [71, 44, 122], [59, 81, 139], [44, 113, 142],\r\n              [33, 144, 141], [39, 173, 129], [92, 200, 99], [170, 220, 50], [253, 231, 37]\r\n            ];\r\n            const idx = Math.floor(t * (stops.length - 1));\r\n            const [r, g, b] = stops[idx];\r\n            return `rgb(${r},${g},${b})`;\r\n          }\r\n          for (let r = 0; r < this.rows; r++) {\r\n            for (let c = 0; c < this.cols; c++) {\r\n              flat.push({\r\n                row: r,\r\n                col: c,\r\n                value: map[r][c],\r\n                color: viridisColor(map[r][c], min, max)\r\n              });\r\n            }\r\n          }\r\n          this.heatmapCells = flat;\r\n          console.log('[FRONTEND] Aggiornata heatmapCells, frame:', frameIndex, 'cells:', flat.length);\r\n          if (callback) callback();\r\n        } else {\r\n          this.heatmapCells = [];\r\n          console.warn('[FRONTEND] Nessun dato Range-Doppler Map per frame:', frameIndex);\r\n        }\r\n      },\r\n      error: (error) => {\r\n        console.error('[FRONTEND] Errore fetch Range-Doppler frame:', frameIndex, error);\r\n        this.heatmapCells = [];\r\n        if (callback) callback();\r\n      }\r\n    });\r\n  }\r\n\r\n  fetchAndAnimate(): void {\r\n    if (this.animationInterval) {\r\n      clearInterval(this.animationInterval);\r\n    }\r\n    // Carica subito il primo frame, poi avvia animazione solo dopo aver ricevuto totalFrames\r\n    this.fetchDopplerFrame(this.currentFrameIndex, () => {\r\n      if (this.totalFrames > 1) {\r\n        this.animationInterval = setInterval(() => {\r\n          if (this.currentFrameIndex < this.totalFrames - 1) {\r\n            this.currentFrameIndex++;\r\n          } else {\r\n            this.currentFrameIndex = 0;\r\n          }\r\n          this.fetchDopplerFrame(this.currentFrameIndex);\r\n        }, 100); // 100ms tra i frame\r\n      }\r\n    });\r\n  }\r\n\r\n  // Puoi aggiungere qui i metodi per animazione e cambio frame come prima, ma ora basta chiamare fetchDopplerFrame con l'indice desiderato.\r\n}\r\n","<div class=\"doppler-range-container\">\r\n  <div class=\"doppler-header\">\r\n    <h3>Range-Doppler Map (Live Plot)</h3>\r\n    <div class=\"frame-info\" *ngIf=\"heatmapCells.length > 0\">\r\n      <span>Frame: {{ currentFrameIndex + 1 }}</span>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class=\"doppler-visualization\">\r\n    <div class=\"heatmap-container\" *ngIf=\"heatmapCells.length > 0\">\r\n      <div class=\"heatmap-grid\" \r\n           [style.grid-template-rows]=\"'repeat(' + rows + ', 1fr)'\"\r\n           [style.grid-template-columns]=\"'repeat(' + cols + ', 1fr)'\">\r\n        <div *ngFor=\"let cell of heatmapCells\" \r\n             class=\"heatmap-cell\"\r\n             [style.background-color]=\"cell.color\"\r\n             [style.grid-row]=\"cell.row + 1\"\r\n             [style.grid-column]=\"cell.col + 1\"\r\n             [title]=\"'Frame: ' + (currentFrameIndex + 1) + ', Row: ' + cell.row + ', Col: ' + cell.col + ', Value: ' + cell.value.toFixed(4)\">\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Color Bar Legend -->\r\n      <div class=\"color-bar\">\r\n        <div class=\"color-gradient\"></div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Loading state -->\r\n    <div *ngIf=\"heatmapCells.length === 0\" class=\"loading-state\">\r\n      <p>Loading Range-Doppler data...</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}